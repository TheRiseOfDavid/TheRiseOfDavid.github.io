<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    資料庫管理 筆記 - 第六章 Advanced SQL |  大衞的筆記
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/main.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-159948450-1', 'auto');
ga('send', 'pageview');

</script>



  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-NTUT_note/database6" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  資料庫管理 筆記 - 第六章 Advanced SQL
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/01/13/NTUT_note/database6/" class="article-date">
  <time datetime="2021-01-13T12:34:50.000Z" itemprop="datePublished">2021-01-13</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%8C%97%E7%A7%91%E4%B8%8A%E8%AA%B2%E7%AD%86%E8%A8%98/">北科上課筆記</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字數統計：</span>
            <span class="post-count">2k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 閱讀時間≈</span>
            <span class="post-count">9分鐘</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h2 id="筆記說明"><a href="#筆記說明" class="headerlink" title="筆記說明"></a>筆記說明</h2><blockquote>
<p>此筆記用途在於台北科技大學資訊與財金管理系大二上資料庫管理重點整理<br><font color="#dd0000">並非所有人都適用，部分對我而言稍加容易的內容並不會寫在此內。</font></p>
</blockquote>
<a id="more"></a>

<h2 id="PROCESSING-MULTIPLE-TABLES-處理兩者以上的表"><a href="#PROCESSING-MULTIPLE-TABLES-處理兩者以上的表" class="headerlink" title="PROCESSING MULTIPLE TABLES 處理兩者以上的表"></a>PROCESSING MULTIPLE TABLES 處理兩者以上的表</h2><ul>
<li>Join<br>a relational operation that causes(原因) two or more tables with a common domain to be combined into a single table or view</li>
<li>Equi-join 類似於交集 - 有重複值<br>A join in which the joining condition(情況) is based on equality between values in the common columns; common columns appear redundantly(多餘) in the result table，也就是只要兩個表的某個值相同就會輸出，但那兩個同樣的值會被輸出兩次</li>
<li>Natural (inner) join 類似於交集<br>An equi-join(上面那點) in which one of the duplicate columns is eliminated(消除) in the result table</li>
<li>Outer join 類似於餘集<br>輸出表為值不相同的，A join in which rows that do not have matching values in common columns are nonetheless(儘管如此) included in the result table (as opposed(反對) to innerjoin, in which rows must have matching values in order to appear in the result table)</li>
<li>Union join 類似於聯集<br>Includes all data from each table that was joined</li>
<li>圖表<blockquote>
<p><img src="https://i.imgur.com/1U7KjW0.jpg" alt=""></p>
</blockquote>
</li>
<li>圖示 join 查詢<blockquote>
<p><img src="https://imgur.com/XzERFKl.jpg" alt=""></p>
</blockquote>
</li>
</ul>
<h3 id="上述-join-的-example"><a href="#上述-join-的-example" class="headerlink" title="上述 join 的 example"></a>上述 join 的 example</h3><ul>
<li>Equi-join<blockquote>
<p><img src="https://imgur.com/x1dEZK9.jpg" alt=""></p>
</blockquote>
</li>
<li>Inner Join <ul>
<li>INNER JOIN clause(子句) is an alternative(可替代) to WHERE clause, and is used to match primary(主) and foreign(外來) keys.</li>
<li>An INNER join will only return rows from each table that have matching rows in the other.</li>
<li>This query produces the same results as the previous(先前) equi-join example</li>
<li>程式碼 (圖)<blockquote>
<p><img src="https://imgur.com/H3MlEGa.jpg" alt=""></p>
</blockquote>
</li>
</ul>
</li>
<li>Nature Join <blockquote>
<p><img src="https://imgur.com/3j0Z2Iq.jpg" alt=""></p>
</blockquote>
</li>
<li>Outer Join <ul>
<li>LEFT OUTER JOIN clause causes(原因) rows from the first mentioned(提起) table (customer) to appear even if there is no corresponding order data.</li>
<li>Unlike(不像) an INNER join, this will include customer rows with no matching order rows.</li>
<li>程式碼 (圖)<blockquote>
<p><img src="https://imgur.com/BFq96ka.jpg" alt=""></p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="透過命名變數讓輸出的名子改變"><a href="#透過命名變數讓輸出的名子改變" class="headerlink" title="透過命名變數讓輸出的名子改變"></a>透過命名變數讓輸出的名子改變</h2><p>What are the employee ID and name of each employee and the name of his or her supervisor(主管) (label the supervisor’s name Manager)?</p>
<blockquote>
<p><img src="https://imgur.com/C3p7gm8.jpg" alt=""></p>
</blockquote>
<h2 id="SUBQUERIES-子查詢"><a href="#SUBQUERIES-子查詢" class="headerlink" title="SUBQUERIES 子查詢"></a>SUBQUERIES 子查詢</h2><p>placing an inner query(內部查詢) (SELECT statement) inside an outer query(外部查詢)</p>
<ul>
<li>Options <ul>
<li>In a condition of the WHERE clause</li>
<li>As a “table” of the FROM clause</li>
<li>Returning a field(區塊) for the SELECT clause</li>
<li>Within the HAVING clause 在 having 子句內</li>
</ul>
</li>
<li>能夠做到的事<ul>
<li>Noncorrelated(非相關性) <ul>
<li>executed once for the entire outer query 執行一次整個外部查詢</li>
<li>Do not depend on data from the outer query 指不需要再外面寫一個 select，內部就可以寫外部查詢了 </li>
</ul>
</li>
<li>Correlated <ul>
<li>executed once for each row returned by the outer query 對每一欄執行一次外部查詢</li>
<li>Make use of data from the outer query 利用外部查詢的資料</li>
<li>Can use the EXISTS and ALL operators 可以使用EXISTS和ALL運算 </li>
<li>Example<blockquote>
<p><img src="https://imgur.com/JKUC8EC.jpg" alt=""></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li>Example<ul>
<li><blockquote>
<p><img src="https://imgur.com/CwUaZFZ.jpg" alt=""></p>
</blockquote>
</li>
<li>另外一個方法可以解決上述問題<blockquote>
<p><img src="https://imgur.com/XsbGxFo.jpg" alt=""></p>
</blockquote>
</li>
</ul>
</li>
<li>查詢方法圖示<blockquote>
<p><img src="https://imgur.com/phHXpiU.jpg" alt=""></p>
</blockquote>
</li>
</ul>
<h3 id="ANOTHER-SUBQUERY-EXAMPLE-DERIVED-TABLE-另一種子查詢"><a href="#ANOTHER-SUBQUERY-EXAMPLE-DERIVED-TABLE-另一種子查詢" class="headerlink" title="ANOTHER SUBQUERY EXAMPLE /(DERIVED TABLE) 另一種子查詢"></a>ANOTHER SUBQUERY EXAMPLE /(DERIVED TABLE) 另一種子查詢</h3><p>將我們子查詢的值設成變數，在使他可以跟上面的查詢進行比較</p>
<blockquote>
<p><img src="https://imgur.com/ItsxXAo.jpg" alt=""></p>
</blockquote>
<h2 id="COMBINING-QUERIES"><a href="#COMBINING-QUERIES" class="headerlink" title="COMBINING QUERIES"></a>COMBINING QUERIES</h2><h3 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h3><p>將多個查詢 union 在一起，但所有的資料欄位與屬性都必須相同</p>
<p>Combine the output (union of multiple queries) together into a single result table<br>With UNION queries, the quantity and data types of the attributes in the SELECT clauses of both queries must be identical.</p>
<blockquote>
<p><img src="https://imgur.com/EYpaZ6w.jpg" alt=""></p>
</blockquote>
<h3 id="If-寫法，CONDITIONAL-EXPRESSIONS-USING-CASE-KEYWORD-使用大小寫關鍵字的條件表達"><a href="#If-寫法，CONDITIONAL-EXPRESSIONS-USING-CASE-KEYWORD-使用大小寫關鍵字的條件表達" class="headerlink" title="If 寫法，CONDITIONAL EXPRESSIONS USING CASE KEYWORD 使用大小寫關鍵字的條件表達"></a>If 寫法，CONDITIONAL EXPRESSIONS USING CASE KEYWORD 使用大小寫關鍵字的條件表達</h3><p>Select Case 可以做到程式中的 if-then，只需要透過此方式即可。 </p>
<p>CASE expression acts like an if-then statement. It allows you to choose what will appear in a column of the result set, depending on a condition.</p>
<p>範例如下</p>
<blockquote>
<p><img src="https://imgur.com/m6EKI08.jpg" alt=""></p>
</blockquote>
<h3 id="操作-View-關聯表-，MORE-COMPLICATED-SQL-QUERIES-更多複雜的-SQL-操作"><a href="#操作-View-關聯表-，MORE-COMPLICATED-SQL-QUERIES-更多複雜的-SQL-操作" class="headerlink" title="操作 View(關聯表)，MORE COMPLICATED SQL QUERIES 更多複雜的 SQL 操作"></a>操作 View(關聯表)，MORE COMPLICATED SQL QUERIES 更多複雜的 SQL 操作</h3><ul>
<li>資料庫可能會有好幾千個 table，而且 table 有很多 column<br>Production databases contain hundreds or even thousands of tables, and tables could include hundreds of columns.</li>
<li>因此查詢可能會變得非常複雜<br>So, sometimes query requirements can be very complex.</li>
<li>有時可以透過 View 來合併查詢<br>sometimes it’s useful to combine queries, through the use of Views.</li>
<li>如果使用 View(其中一個查詢)，也可以讓另外一個查詢使用 View，類似操作 table<br>If you use a view (which is a query), you could have another query that uses the view as if it were a table.</li>
<li>簡單來說 View 就是虛擬的 table，結合現在的 table or View 產生</li>
</ul>
<p>View 的操作範例</p>
<blockquote>
<p><img src="https://imgur.com/VB38lat.jpg" alt=""></p>
</blockquote>
<h3 id="TIPS-FOR-DEVELOPING-QUERIES"><a href="#TIPS-FOR-DEVELOPING-QUERIES" class="headerlink" title="TIPS FOR DEVELOPING QUERIES"></a>TIPS FOR DEVELOPING QUERIES</h3><ul>
<li>熟悉資料模型，實體與關聯性<br>Be familiar with the data model (entities and relationships)</li>
<li>了解想要的結果<br>Understand the desired(了解) results</li>
<li>知道結果中鎖需要的屬性<br>Know the attributes desired in results</li>
<li>辨識實體所包含的屬性<br>Identify the entities that contain desired attributes</li>
<li>Review ERD</li>
<li>對每一個 link 建構一個 where 相等性<br>Construct a WHERE equality for each link</li>
<li>如果需要，使用 GROUP BY 和 HAVING 子句<br>Fine tune with GROUP BY and HAVING clauses if needed</li>
<li>考慮異常資料對資料庫的影響<br>Consider the effect on unusual data</li>
</ul>
<h2 id="查詢效率的注意事項-QUERY-EFFICIENCY-CONSIDERATIONS"><a href="#查詢效率的注意事項-QUERY-EFFICIENCY-CONSIDERATIONS" class="headerlink" title="查詢效率的注意事項 QUERY EFFICIENCY CONSIDERATIONS"></a>查詢效率的注意事項 QUERY EFFICIENCY CONSIDERATIONS</h2><ul>
<li>在 select 中標註屬性而不用 *<br>Instead of SELECT *, identify the specific attributes in the SELECT clause; this helps reduce network traffic of result set</li>
<li>限制子查詢的數量，盡量在單查詢中查尋完畢<br>Limit the number of subqueries; try to make everything done in a single query if possible</li>
<li>如果要多次使用同樣查詢，就建立成關聯表(View)<br>If data is to be used many times, make a separate query and store it as a view</li>
</ul>
<h2 id="查詢設計方法-GUIDELINES-FOR-BETTER-QUERY-DESIGN"><a href="#查詢設計方法-GUIDELINES-FOR-BETTER-QUERY-DESIGN" class="headerlink" title="查詢設計方法 GUIDELINES FOR BETTER QUERY DESIGN"></a>查詢設計方法 GUIDELINES FOR BETTER QUERY DESIGN</h2><ul>
<li>了解再查詢資料中使用 index<br>Understand how indexes are used in query processing</li>
<li>保持優化且為最新<br>Keep optimizer statistics up to date</li>
<li>對於文字或字段兩種資料型態兼容<br>Use compatible data types for fields and literals(文字)</li>
<li>Write simple queries</li>
<li>把複雜查詢拆成簡單查詢<br>Break complex queries into multiple simple parts</li>
<li>盡量不要把查詢內嵌在另一個查詢<br>Don’t nest one query inside another query</li>
<li>自身查詢不跟自身連接<br>Don’t combine a query with itself (if possible avoid self-joins)</li>
<li>創建暫存表在擁有非常多查詢時<br>Create temporary tables for groups of queries</li>
<li>Combine update operations 合併更新操作</li>
<li>僅檢索需要的數據<br>Retrieve only the data you need</li>
<li>沒有 index 就沒辦法對 DBMS 排序<br>Don’t have the DBMS sort without an index</li>
<li>Learn! (…)</li>
<li>考慮某些特殊查詢在總查詢處理時間會不會過多<br>Consider the total query processing time for ad hoc queries</li>
</ul>
<h2 id="使用與定義關聯表-USING-AND-DEFINING-VIEWS"><a href="#使用與定義關聯表-USING-AND-DEFINING-VIEWS" class="headerlink" title="使用與定義關聯表 USING AND DEFINING VIEWS"></a>使用與定義關聯表 USING AND DEFINING VIEWS</h2><ul>
<li>Dynamic View<ul>
<li>對於用戶新增動態<strong>虛擬表</strong><br>A “virtual table” created dynamically upon request by a user</li>
<li>沒有資料儲存在 View，而是將原始資料提供給用戶<br>No data actually stored; instead data from base table made available to user</li>
<li>為 table or View 中的 SQL select 語法<br>Based on SQL SELECT statement on base tables or other views</li>
<li>Advantage 優點<ul>
<li>Simplify query commands</li>
<li>Assist(協助) with data security</li>
<li>Enhance(提高) programming productivity(生產率)</li>
<li>Contain most current base table data</li>
<li>Use little storage space</li>
<li>Provide customized(專屬打造) view for user</li>
<li>Establish(建立) physical(物理) data independence</li>
<li>每次使用 View 都需要時間<br>Use processing time each time view is referenced(被引用)</li>
<li>可能沒有辦法直接更新<br>May or may not be directly updateable</li>
<li>謹慎使用 View<br>As with all SQL constructs, you should use views with discretion</li>
</ul>
</li>
</ul>
</li>
<li>實質關聯表 Materialized View<ul>
<li>複製資料，實際儲存在 View<br>Copy or replication of data, data actually stored</li>
<li>需要不斷更新才可以與原本查詢的 table 資料相符<br>Must be refreshed periodically to match corresponding base tables</li>
</ul>
</li>
<li>Sample <ul>
<li>View has a name</li>
<li>View is based on a SELECT statement</li>
<li>CHECK_OPTIO 只能用來可以被更新的關聯表，並禁止更新不包含在 View 裡的資料<br>CHECK_OPTION works only for updateable views and prevents updates that would create rows not included in the view</li>
</ul>
</li>
</ul>
<h2 id="例行程序-ROUTINES-AND-TRIGGERS"><a href="#例行程序-ROUTINES-AND-TRIGGERS" class="headerlink" title="例行程序 ROUTINES AND TRIGGERS"></a>例行程序 ROUTINES AND TRIGGERS</h2><ul>
<li>Routines 需要執行的程式區塊</li>
<li>Functions 給 Routines 參數並回傳值</li>
<li>Procedures 給 Routines 參數並<strong>不傳</strong>值</li>
<li>Triggers 當 Routines 啟動到特殊事件時觸發</li>
<li>Procedures and functions are called explicitly(明確調用). Triggers are event-driven(事件觸發).</li>
<li>圖示<blockquote>
<p><img src="https://imgur.com/qtZevFX.jpg" alt=""></p>
</blockquote>
</li>
<li>Triggers Sample 有兩張<blockquote>
<p><img src="https://imgur.com/dnxZMF3.jpg" alt=""><br><img src="https://imgur.com/6p5occl.jpg" alt=""></p>
</blockquote>
</li>
</ul>
<h2 id="SQL-ENHANCEMENTS-增強"><a href="#SQL-ENHANCEMENTS-增強" class="headerlink" title="SQL ENHANCEMENTS(增強)"></a>SQL ENHANCEMENTS(增強)</h2><ul>
<li>User-defined data types (UDT) 自定義資料型態</li>
<li>可設定子類別為標準型態 or object<br>Subclasses of standard types or an object type</li>
<li>Analytical functions (for OLAP)<ul>
<li>CEILING, FLOOR, SQRT, RANK, DENSE_RANK, ROLLUP, CUBE, SAMPLE,</li>
<li>WINDOW –improved numerical analysis capabilities</li>
</ul>
</li>
<li>New Data Types<br>BIGINT, MULTISET (collection), XML</li>
<li>CREATE TABLE LIKE<br>create a new table similar to an existing one</li>
<li>MERGE</li>
</ul>
<h2 id="SQL-EXTENSIONS-擴展"><a href="#SQL-EXTENSIONS-擴展" class="headerlink" title="SQL EXTENSIONS(擴展)"></a>SQL EXTENSIONS(擴展)</h2><ul>
<li>Persistent(永久的) Stored Modules (SQL/PSM)</li>
<li>Capability(能力) to create and drop(刪除) code modules</li>
<li>New statements: CASE, IF, LOOP, FOR, WHILE, etc.</li>
<li>Makes SQL into a <a href="https://zh.wikipedia.org/wiki/%E8%BF%87%E7%A8%8B%E5%BC%8F%E7%BC%96%E7%A8%8B" target="_blank" rel="noopener">procedural language(可以變成函式相互呼叫)</a></li>
<li>Oracle has propriety version(專有版本) called PL/SQL, and Microsoft SQL Server has Transact/SQL</li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>版權聲明： </strong s>
              本部落格所有文章除有特別聲明外，均採用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow"
                target="_blank">Apache License 2.0</a> 許可協議。轉載請註明出處！
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8C%97%E7%A7%91%E4%B8%8A%E8%AA%B2%E7%AD%86%E8%A8%98/" rel="tag">北科上課筆記</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86/" rel="tag">資料庫管理</a></li></ul>


    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2021/01/13/NTUT_note/database7/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            資料庫管理 筆記 - 第七章 Databases in Applications
          
        </div>
      </a>
    
    
      <a href="/2021/01/09/UVa/UVa10181/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">UVa10181 - 15-Puzzle Problem(A*搜尋 )</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        notify: 'false',
        verify: 'false',
        avatar: 'mp',
        placeholder: '給我的文章加點評論吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020-2021
        John Doe
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    <aside class="sidebar">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="大衞的筆記"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主頁</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">歸檔</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分類</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">標籤</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">關於我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜尋">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i></p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/share.js"></script>


<script src="/js/lazyload.min.js"></script>


<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['筱柔，我想要緊緊抱住你，那感覺就像得到了全世界。', '希望未來還可以跟你在一起，我會努力做好稱職的男朋友的！', '未來也請多指教拉 ε٩(๑&gt; ₃ &lt;)۶з，親親抱抱揉揉胸~'],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: true
    });
  } catch (err) {
  }

</script>




<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/js/ayer.js"></script>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>



<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>


    
  </div>
</body>

</html>